<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
	<head>
		<title>login</title>
		<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
		<link href="css/style.css" rel="stylesheet"
			type="text/css" />
	</head>

	<body>
		<div id="wrap">
			<div id="top_content">
					<div id="header">
						<div id="rightheader">
							<p>
								2020/10/20
								<br />
							</p>
						</div>
						<div id="topheader">
							<h1 id="title">
								<a href="#">main</a>
							</h1>
						</div>
						<div id="navigation">
						</div>
					</div>
				<div id="content">
					<p id="whereami">
					</p>
					<h1>
						login
					</h1>
					<form action="Emp/emplist.html" method="post">
						<table border="0" cellpadding="0" cellspacing="0"
							class="form_table">
							<tr>
								<td align="right" valign="middle">
									username:
								</td>
								<td align="left" valign="middle">
									<input class="inputgri" type="text" v-model="user.username" />
								</td>
							</tr>
							<tr>
								<td align="right" valign="middle">
									password:
								</td>
								<td align="left" valign="middle">
									<input class="inputgri" type="password" v-model="user.password" />
								</td>
							</tr>
						</table>
						<p>
							<input @click="login" class="button" type="button" value="Submit &raquo;" />
							&nbsp;&nbsp;
							<a href="/ems_vue/regist.html">注册</a>
						</p>
					</form>
				</div>
			</div>
			<div id="footer">
				<div id="footer_bg">
					ABC@126.com
				</div>
			</div>
		</div>
	</body>
</html>
<script src="/ems_vue/js/vue.js"></script>
<script src="/ems_vue/js/axios.min.js"></script>
<script>
    var app = new Vue({
        el: "#wrap",
        data: {
            user:{},//用来保存用户数据
        },
        methods:{
            //用户登录
            login(){
                //发送登录请求
                axios.post("http://localhost:8989/ems_vue/user/login",this.user).then(res=>{
                    console.log(res.data);
                if(res.data.state){
                    alert(res.data.msg+",点击确定进入主页!");
                    //将登录用户信息放入localStorage key  value
                    localStorage.setItem("user",JSON.stringify(res.data.user));
                    location.href="/ems_vue/Group/grouplist.html";
                }else{
                    alert(res.data.msg);
                }
            })
            }
        }
    });
</script>